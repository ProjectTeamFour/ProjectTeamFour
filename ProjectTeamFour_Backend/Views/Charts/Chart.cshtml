<!-- Custom scripts for all pages-->
<script src="~/js/sb-admin-2.min.js"></script>

@*<script>
    // 在main.js中引入axios並註冊
    import http from './http'
    Vue.prototype.$http = http //掛載到原型上
</script>*@

<!-- Page Wrapper -->
<div id="wrapper">
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">
            <!-- Begin Page Content -->
            <div class="container-fluid">

                <!-- Page Heading -->
                <h1 class="h3 mb-2 text-gray-800">集資車車募資平台 分析</h1>
                <p class="mb-4">
                    後臺圖表測試 <a target="_blank" href="#">連結</a>
                </p>

                <!-- Content Row -->
                <div class="row">

                    <div class="col-xl-8 col-lg-7">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">月營業額統計圖</h6>
                        </div>
                        
                        <div id="orders_line" style="width: 600px;height:400px;"></div>
                        <script>
                            // 基于准备好的dom，初始化echarts实例
                            var myChart = echarts.init(document.getElementById('orders_line'));

                            // 指定图表的配置项和数据
                            var option = {
                                title: {
                                    text: '訂單銷售統計圖'
                                },
                                tooltip: {},
                                legend: {
                                    data: ['金額']
                                },
                                xAxis: {
                                    data: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "July", "Aug", "Sep", "Oct", "Nov", "Dec"]
                                },
                                yAxis: {},
                                series: [{
                                    name: '金額',
                                    type: 'line',
                                    data: [5, 120, 36, 10, 10, 20, 5, 20, 36, 10, 10, 20]
                                }]
                            };

                            // 使用刚指定的配置项和数据显示图表。
                            myChart.setOption(option);
                        </script>


                        <!-- Bar Chart -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">提案分類統計圖</h6>
                            </div>
                            <div class="card-body">
                                <div class="chart-bar">
                                    <div id="category_bar" style="width: 600px;height:400px;"></div>
                                </div>
                                <hr>
                                <script>
                                    var myChart = echarts.init(document.getElementById('category_bar'));

                                    // 指定图表的配置项和数据
                                    var option = {

                                        title: {
                                            text: '提案分類統計圖'
                                        },
                                        tooltip: {},
                                        legend: {
                                            data: ['Category']
                                        },
                                        xAxis: {
                                            data: ["科技設計", "藝術影視", "音樂", "生活", "公共在地", "遊戲出版"]
                                        },
                                        yAxis: {},
                                        series: [{
                                            name: 'Category',
                                            type: 'bar',
                                            data: [120, 36, 10, 20, 5, 20]
                                        }]
                                    };

                                    myChart.setOption(option);
                                </script>
                            </div>
                        </div>
                    </div>

                    <!-- Donut Chart -->
                    @*<div class="col-xl-4 col-lg-5">*@<div class="col-xl-8 col-lg-7">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">平台專案募資狀態統計圖</h6>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-pie pt-4">
                                    <div id="projectStatus_pie" style="width: 600px;height:300px;"></div>
                                </div>
                                <hr>
                                <script>
                                    var myChart = echarts.init(document.getElementById('projectStatus_pie'));

                                    // 指定图表的配置项和数据
                                    var option = {

                                        series: [{
                                            name: '募資狀態',
                                            type: 'pie',
                                            radius: '55%',
                                            data: [
                                                { value: 235, name: '募資成功' },
                                                { value: 274, name: '募資失敗' },
                                                { value: 310, name: '審核中' },
                                                { value: 335, name: '進行中' }
                                            ],

                                        }]
                                    };
                                    myChart.setOption(option);
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
                <div id="main" style="width: 600px;height:400px;"></div>
                <script type="text/javascript">
                    // 基于准备好的dom，初始化echarts实例
                    var myChart = echarts.init(document.getElementById('main'));

                    // 指定图表的配置项和数据
                    var option = {
                        title: {
                            text: '銷售排行榜測試'
                        },
                        tooltip: {},
                        legend: {
                            data: ['销量']
                        },
                        xAxis: {
                            data: ["1", "2", "3", "4", "5", "6"]
                        },
                        yAxis: {},
                        series: [{
                            name: '销量',
                            type: 'bar',
                            data: [55, 40, 36, 30, 28, 20]
                        }]
                    };

                    // 使用刚指定的配置项和数据显示图表。
                    myChart.setOption(option);
                </script>
            </div>
        </div>
        <!-- End of Main Content -->
    </div>
    <!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->
<script type="text/javascript">
        const member = new Vue({
            el:"#member",
            data() {
                    return {
                        info: '測試Echart AJAX!!!'
                    }
            },
            mounted() {
                this.drawLine();
            },
            created() {
                axios
                    .get('/Api/Members/GetAll')
                    .then(response => (this.info = response))
                    .catch(function (error) {
                        //
                        console.log(error);
                    });

                //this.$http.get('./static/dat.json').then(res => {
                //    const data = res.data;
                //    this.goods = data
                //    console.log(this.goods);
                //    console.log(Array.from(this.goods.xAxis.data));
                //})
            },

            methods: {
                drawLine() {
                    // 基於準備好的dom，初始化echarts例項
                    let myChart = this.$echarts.init(document.getElementById('member'))
                    // 指定圖表的配置項和資料
                    myChart.setOption({
                        title: {
                            text: 'AXIOS test'
                        },    
                        tooltip: {},
                        legend: {
                            data: ['銷量']
                        },
                        xAxis: {
                            data: [] //["襯衫","羊毛衫","雪紡衫","褲子","高跟鞋","襪子"]
                        },
                        yAxis: {},
                        series: [{
                            name: '销量',
                            type: 'bar',
                            data: [] //[5, 20, 36, 10, 10, 20]
                        }]
                    });
                    //// 异步加载数据
                    //$.get('data.json').done(function (data) {
                    //    // 填入数据
                    //    myChart.setOption({
                    //        xAxis: {
                    //            data: data.categories
                    //        },
                    //        series: [{
                    //            // 根据名字对应到相应的系列
                    //            name: '销量',
                    //            data: data.data
                    //        }]
                    //    });
                    //});

                    ////顯示載入動畫
                    //myChart.showLoading();
                    //this.$http.get("./static/dat.json").then((res) => {
                    //    setTimeout(() => { //未來讓載入動畫效果明顯,這裡加入了setTimeout,實現3s延時
                    //        const data = res.data;
                    //        const list = data.series.map(good => {
                    //            let list = good.data;
                    //            return [...list]
                    //        })
                    //        console.log(list);
                    //        console.log(Array.from(...list));
                    //        myChart.hideLoading(); //隱藏載入動畫
                    //        myChart.setOption({
                    //            title: data.title,
                    //            xAxis: [{
                    //                data: data.xAxis.data
                    //            }],
                    //            series: [{
                    //                name: '銷量',
                    //                type: 'bar',
                    //                data: Array.from(...list) //[5, 20, 36, 10, 10, 20]
                    //            }]
                    //        });
                    //    }, 3000)
                    //})
                }
            }
        });

    </script>